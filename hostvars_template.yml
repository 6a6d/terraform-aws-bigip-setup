all:
  vars:
    app_server_address: "${appserver_guest_ip}"

  children:
    servers:
      hosts:
        ${appserver_host_ip}:
          ansible_connection: local
          app_server_gateway: "${appserver_gateway_ip}" 

    big_ips:
      hosts:
        ${bigip_host_ip}:
          bigip_provider:
            server: "{{ inventory_hostname }}"
            user: "${bigip_username}"
            password: "${bigip_password}"
          bigip_validate_certs: false
          bigip_domain: "${bigip_domain}"
          bigip_hostname: "${bigip_host_dns}"
          bigip_ntp_server: "\"0.pool.ntp.org\", \"1.pool.ntp.org\""
          bigip_ntp_timezone: "America/Los_Angeles"
          bigip_dns_server: "${bigip_dns_server}" # find this value
          bigip_dns_search: "\"{{ bigip_domain }}\""
          bigip_external_self_ip: "${bigip_external_self_ip}/24"
          bigip_internal_self_ip: "${bigip_internal_self_ip}/24"
          app_virtual_address: "${appserver_virtual_ip}"
